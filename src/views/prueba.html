
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Stocks Watchlist</title>
        
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<link rel="stylesheet" href="../styles/style.css">
		<script src="purify.min.js"></script>
		<!-- more head content -->
    </head>
    <body>
		<div class="table-widget">
			<span class="caption-container">
				<span class="table-title">
					<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path fill-rule="evenodd" clip-rule="evenodd" d="M11.6775 1.3486C10.9695 2.1636 10.6875 7.2886 11.5105 8.1126C12.3335 8.9346 17.2785 8.5186 18.4665 7.5836C21.3245 5.3326 13.9375 -1.2534 11.6775 1.3486Z" stroke="#272727" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						<path fill-rule="evenodd" clip-rule="evenodd" d="M16.1372 11.79C17.2212 12.874 14.3472 19.054 8.65122 19.054C4.39722 19.054 0.949219 15.606 0.949219 11.353C0.949219 6.053 6.17822 2.663 7.67722 4.162C8.54022 5.025 7.56822 9.086 9.11622 10.635C10.6642 12.184 15.0532 10.706 16.1372 11.79Z" stroke="#272727" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
					</svg>
					Watchlist
				</span>
				<span class="table-row-count"></span>
			</span>
			<div class="table-wrapper">
				<!-- generate table here -->
			</div>
		</div>
		<script>
             const stocks = [
                {
                    
                    name: 'Shell plc',
                    ticker: 'SHEL',
                    price: 64.53,
                    change: 0.45,
                    marketCap: '215.6B',
                    peRatio: 7.88,
                    dividendYield: 4.08,
                    volume: '5.2M',
                },
                {
                    src: 'assets/apple.png',
                    name: 'Apple Inc',
                    ticker: 'AAPL',
                    price: 194.39,
                    change: 0.12,
                    marketCap: '2.732T',
                    peRatio: 29.32,
                    dividendYield: '0.54',
                    volume: '42M',
                },
                {
                    src: 'assets/tesla.png',
                    name: 'Tesla Inc',
                    ticker: 'TSLA',
                    price: 254.33,
                    change: -5.08,
                    marketCap: '816B',
                    peRatio: 73.01,
                    dividendYield: 'N/A',
                    volume: '8.4M',
                },
                {
                    src: 'assets/nvidia.png',
                    name: 'NVidia Corporation',
                    ticker: 'NVDA',
                    price: 495.22,
                    change: -2.20,
                    marketCap: '1.223T',
                    peRatio: 65.33,
                    dividendYield: '0.03',
                    volume: '38M',
                },

            ]


            let tableRowCount = document.getElementsByClassName('table-row-count');
            tableRowCount[0].innerHTML = `(${stocks.length}) Stocks`;

            let tableBody = document.getElementById('table-rows');

            const mappedRecords = stocks
            .map(
            (stock) => {
                return `<tr>
                <td class="stock sticky-left">
                    <div class="stock-wrapper">
                        <img src="${stock.src}" alt="${stock.name}">
                        <div class="stock-info">
                            <span class="stock-info__ticker">
                                ${stock.ticker}
                            </span>
                            <span class="stock-info__name">
                                ${stock.name}
                            </span>
                        </div>
                    </div>
                </td>
                <td>${stock.price}</td>
                <td class="price ${stock.change >= 0 ? 'up' : 'down'}">${stock.change}</td>
                <td class="price ${stock.change >= 0 ? 'up' : 'down'}">
                    ${parseFloat(stock.change / stock.price * 100).toFixed(2)}
                </td>
                <td>
                    ${stock.marketCap}
                </td>
                <td>
                    ${stock.volume}
                </td>
                <td>
                    ${stock.peRatio}
                </td>
                <td>
                    ${stock.dividendYield}
                </td>
                <td class="sticky-right">
                    <button class="btn btn--primary">Trade</button>
                </td>
            </tr>`;
            });

            const tableWrapper = document.querySelector('.table-wrapper');

            tableWrapper.innerHTML = DOMPurify.sanitize(`
                <table>
                    <thead>
                        <tr>
                            <th class="sticky-left">Ticker</th>
                            <th>Price [$]</th>
                            <th>Change [$]</th>
                            <th>Change (%)</th>
                            <th>Market Cap</th>
                            <th>Volume</th>
                            <th>PE Ratio</th>
                            <th>Dividend (%)</th>
                            <th class="sticky-right"></th>
                        </tr>
                    </thead>
                    <tbody id="table-rows">
                        ${mappedRecords.join('')}
                    </tbody>
                    <!-- <tfoot>
                            My footer
                    </tfoot> -->
                </table>
            `);
        </script>
    </body>
</html>